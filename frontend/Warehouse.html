<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zarządzanie zapasami pizzerii</title>
    <link rel="icon" href="/assets/pizza_icon.png" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background-image: url('https://abrakadabra.fun/uploads/posts/2022-01/1642956515_32-abrakadabra-fun-p-fon-dlya-pitstsi-37.jpg');
            background-size: cover;
            background-attachment: fixed;
            font-family: 'Roboto', sans-serif;
        }
        .container {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            padding: 30px;
            margin-top: 50px;
        }
        h1 {
            color: #d32f2f;
            font-weight: bold;
            text-align: center;
            margin-bottom: 30px;
        }
        .inventory-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
            transition: background-color 0.3s;
        }
        .inventory-item:hover {
            background-color: rgba(248, 249, 250, 0.8);
        }
        .btn-primary {
            background-color: #d32f2f;
            border-color: #d32f2f;
        }
        .btn-primary:hover {
            background-color: #b71c1c;
            border-color: #b71c1c;
        }
        .btn-danger {
            background-color: #ff5722;
            border-color: #ff5722;
        }
        .btn-danger:hover {
            background-color: #e64a19;
            border-color: #e64a19;
        }
        .pizza-icon {
            font-size: 2em;
            color: #d32f2f;
            margin-right: 10px;
        }
        .quantity-input {
            width: 150px; 
            margin-right: 10px;
        }
        .ingredient-image {
            width: 50px;
            height: 50px;
            object-fit: cover;
            margin-right: 10px;
        }
        .btn-remove:hover {
            background-color: #dc3545;
            border-color: #dc3545;
        }
        .btn-add {
            background-color: #28a745;
            border-color: #28a745;
            margin-right: 10px;
        }
        .btn-add:hover {
            background-color: #218838;
            border-color: #218838;
        }
        .quantity-controls {
            display: flex;
            align-items: center;
        }
        #searchInput {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-pizza-slice pizza-icon"></i>Zarządzanie zapasami pizzerii</h1>
        
        <input type="text" id="searchInput" class="form-control mb-3" placeholder="Szukaj składnika...">
        
        <div id="inventoryList"></div>
    </div>

    <script>
        const ingredientImages = {
            'Ciasto': '/assets/Składniki/dough.png',
            'Sos pomidorowy': '/assets/Składniki/ketchup.png',
            'Mozzarella': '/assets/Składniki/mozzarella.png',
            'Salami': '/assets/Składniki/salami.png',
            'Pieczarki': '/assets/Składniki/mushroom.png',
            'Cebula': '/assets/Składniki/onion.png',
            'Oliwki': '/assets/Składniki/olives.png',
            'Papryka': '/assets/Składniki/peppers.png',
            'Szynka': '/assets/Składniki/ham.png',
            'Ananas': '/assets/Składniki/pineapple.png',
            'Kukurydza': '/assets/Składniki/corn.png',
            'Oregano': '/assets/Składniki/oregano.png',
            'Jalapeno': '/assets/Składniki/jalapeno.png',
            'Pomidorki koktajlowe': '/assets/Składniki/tomato.png',
            'Ogórek kiszony': '/assets/Składniki/pickle.png'
        };

        const pizzaRecipe = {
            'Ciasto': 0.25,
            'Sos pomidorowy': 0.1,
            'Mozzarella': 0.2,
            'Salami': 0.1,
            'Pieczarki': 0.05,
            'Cebula': 0.03,
            'Oliwki': 0.03,
            'Papryka': 0.05,
            'Szynka': 0.1,
            'Ananas': 0.05,
            'Kukurydza': 0.03,
            'Oregano': 0.01,
            'Jalapeno': 0.02,
            'Pomidorki koktajlowe': 0.05,
            'Ogórek kiszony': 0.03
        };

        let inventory = [
            { name: 'Ciasto', quantity: 25.0, image: ingredientImages['Ciasto'] },
            { name: 'Sos pomidorowy', quantity: 15.5, image: ingredientImages['Sos pomidorowy'] },
            { name: 'Ananas', quantity: 10.0, image: ingredientImages['Ananas'] },
            { name: 'Szynka', quantity: 15.0, image: ingredientImages['Szynka'] },
            { name: 'Papryka', quantity: 5.5, image: ingredientImages['Papryka'] },
            { name: 'Oliwki', quantity: 2.0, image: ingredientImages['Oliwki'] },
            { name: 'Mozzarella', quantity: 15.0, image: ingredientImages['Mozzarella'] },
            { name: 'Salami', quantity: 5.5, image: ingredientImages['Salami'] },
            { name: 'Pieczarki', quantity: 2.0, image: ingredientImages['Pieczarki'] },
            { name: 'Cebula', quantity: 5.5, image: ingredientImages['Cebula'] },
            { name: 'Kukurydza', quantity: 3.0, image: ingredientImages['Kukurydza'] },
            { name: 'Oregano', quantity: 1.0, image: ingredientImages['Oregano'] },
            { name: 'Jalapeno', quantity: 2.0, image: ingredientImages['Jalapeno'] },
            { name: 'Pomidorki koktajlowe', quantity: 5.0, image: ingredientImages['Pomidorki koktajlowe'] },
            { name: 'Ogórek kiszony', quantity: 3.0, image: ingredientImages['Ogórek kiszony'] }
        ];

        function renderInventory(filter = '') {
            const inventoryList = document.getElementById('inventoryList');
            inventoryList.innerHTML = '';
            
            inventory.forEach((item, index) => {
                if (item.name.toLowerCase().includes(filter.toLowerCase())) {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'inventory-item';
                    const pizzaCount = Math.floor(item.quantity / pizzaRecipe[item.name]);
                    const gramsPerPizza = pizzaRecipe[item.name] * 1000;
                    itemElement.innerHTML = `
                        <span>
                            <img src="${item.image}" alt="${item.name}" class="ingredient-image">
                            ${item.name}: ${item.quantity.toFixed(1)} kg
                            (${pizzaCount} pizz, ${gramsPerPizza}g na pizzę)
                        </span>
                        <div class="quantity-controls">
                            <input type="number" class="form-control quantity-input" value="0.1" min="0.1" max="${item.quantity}" step="0.1">
                            <button class="btn btn-success btn-sm btn-add" onclick="addQuantity(${index})">Dodaj kg</button>
                            <button class="btn btn-danger btn-sm btn-remove" onclick="removeQuantity(${index})">Usuń kg</button>
                        </div>
                    `;
                    inventoryList.appendChild(itemElement);
                }
            });
        }

        function removeQuantity(index) {
            const quantityToRemove = parseFloat(document.querySelectorAll('.quantity-input')[index].value);
            if (quantityToRemove > 0 && quantityToRemove <= inventory[index].quantity) {
                inventory[index].quantity -= quantityToRemove;
                if (inventory[index].quantity <= 0) {
                    inventory.splice(index, 1);
                }
                renderInventory();
            } else {
                alert('Proszę wprowadzić prawidłową ilość do usunięcia.');
            }
        }

        function addQuantity(index) {
            const quantityToAdd = parseFloat(document.querySelectorAll('.quantity-input')[index].value);
            if (quantityToAdd > 0) {
                inventory[index].quantity += quantityToAdd;
                renderInventory();
            } else {
                alert('Proszę wprowadzić prawidłową ilość do dodania.');
            }
        }

        document.getElementById('searchInput').addEventListener('input', (e) => renderInventory(e.target.value));

        renderInventory();

        Object.values(ingredientImages).forEach(url => {
            const img = new Image();
            img.src = url;
        });
    </script>
</body>
</html>